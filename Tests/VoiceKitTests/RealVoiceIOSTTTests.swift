//
//  RealVoiceIOSTTTests.swift
//  VoiceKit
//
//  Generated by GPT-5 (OpenAI) â€” collaborator: rdoggett
//  date: 09-17-2025
//

import XCTest
@preconcurrency import AVFoundation
@testable import VoiceKit

@MainActor
internal final class RealVoiceIOSTTTests: XCTestCase {

    func testNormalizeNumeric() {
        XCTAssertEqual(RealVoiceIO.normalizeNumeric(from: "  42 "), "42")
        XCTAssertEqual(RealVoiceIO.normalizeNumeric(from: "seven"), "7")
        XCTAssertEqual(RealVoiceIO.normalizeNumeric(from: "Nineteen"), "19")
        // Decimals are allowed; ensure parsing keeps the decimal
        XCTAssertEqual(RealVoiceIO.normalizeNumeric(from: "forty-two point five"), "42.5")
    }

    func testFinishRecognitionIsIdempotent() {
        let io = RealVoiceIO()
        io.latestTranscript = "hi"
        io.onListeningChanged = { _ in }
        io.finishRecognition()
        io.finishRecognition()
        XCTAssertTrue(true)
    }
}
