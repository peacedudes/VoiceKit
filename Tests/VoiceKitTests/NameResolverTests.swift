//
//  NameResolverTests.swift
//  VoiceKit
//
//  Generated by GPT-5 (OpenAI) — collaborator: rdoggett
//  date: 09-13-2025
//

import XCTest
import VoiceKit

final class NameResolverTests: XCTestCase {

    func testReturnsCleanedRawWhenNoAllowedList() {
        let r = NameResolver()
        XCTAssertEqual(r.resolve(transcript: "  Zoë  ", allowed: nil), "Zoë")
        XCTAssertEqual(r.resolve(transcript: "  Max! ", allowed: []), "Max")
    }

    func testStrictExactMatchesWithDiacriticsAndCase() {
        let r = NameResolver()
        let allowed = ["Zoe", "Andre", "Ana Maria"]
        XCTAssertEqual(r.resolve(transcript: "Zoë", allowed: allowed), "Zoe")
        XCTAssertEqual(r.resolve(transcript: "  ANA   MARIA ", allowed: allowed), "Ana Maria")
        XCTAssertNil(r.resolve(transcript: "Ann", allowed: allowed))
    }

    func testPunctuationAndWhitespaceAreCollapsed() {
        let r = NameResolver()
        let allowed = ["Jean Luc"]
        XCTAssertEqual(r.resolve(transcript: "Jean‑Luc", allowed: allowed), "Jean Luc")
        XCTAssertEqual(r.resolve(transcript: "  Jean, Luc  ", allowed: allowed), "Jean Luc")
    }
}
